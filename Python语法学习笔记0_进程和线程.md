##Python语法学习笔记进程和线程

**人生苦短,快用Python.**

本文是Python语法学习的第6篇笔记,学习过程中参考了[廖雪峰的Python教程](https://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000)和[菜鸟教程Python3篇](https://www.runoob.com/python3/python3-tutorial.html),在此一并表示感谢.

欢迎各位朋友与我进行深入浅出的交流 <developerqingyun@gmail.com>

###进程和线程的概念

多任务就是操作系统可以同时运行多个任务,例如一边用浏览器上网听音乐,运行Python程序,一边爬虫.

单核CPU操作系统轮流让各个任务交替执行,例如任务1执行0.01秒,切换到任务2执行0.01秒,再切换到任务3执行0.01秒.表面上看,每个任务都是交替执行的,但是由于CPU的执行速度太快了,给人的感觉是所有任务都在同时执行的.

真正的并行执行多任务只能在多核CPU上实现,但是由于任务数量远远多于CPU的核心数量,所以操作系统也会自动把很多任务轮流调度到每个核心上执行.

对于操作系统来说,一个任务就是一个进程(Process),比如打开一个浏览器就是启动一个浏览器进程,打开一个记事本就启动了一个记事本进程,打开两个记事本就启动了两个记事本进程,打开一个PyCharm就启动了一个PyCharm进程.

有些进程同时进行多个子任务,例如Word打字,拼写检查等同时进行.在一个进程内部,同时执行多个子任务,把进程内的这些子任务称为线程(Thread).

每个进程至少执行一个任务,所以一个进程至少有一个线程,也可以有多个线程.多个线程也可以同时执行,多线程的执行方式和多进程是一样的,也是由操作系统在多个线程之间快速切换,让每个线程都短暂地交替运行,看起来就像同时执行一样.真正地同时执行多线程需要多核CPU才可能实现.

**要同时执行多个任务怎么办?**

1 多进程模式:启动多个进程,每个进程中值开启一个线程,多个进程同时执行多个任务.

2 多线程模式:只启动一个进程,但是这个进程中开启多个线程,多个线程同时执行多个任务.

3 多进程+多线程模式:启动多个进程,每个进程再启动多个线程.

同时执行多个任务时,各个任务之间通常并不是没有关联的,而是需要相互通信和协调.有肯任务1必须暂停等待任务2完成后才能继续执行,有可能任务3和任务4又不能同时执行.

Python既支持多进程,又支持多线程.

如何调度进程和线程完全由操作系统决定,程序自己不能决定什么时候执行,执行多长时间.

###多进程

Unix/Linux操作系统提供了一个fork()系统调用，它非常特殊。普通的函数调用，调用一次，返回一次，但是fork()调用一次，返回两次，因为操作系统自动把当前进程（称为父进程）复制了一份（称为子进程），然后，分别在父进程和子进程内返回。

创建子进程时，只需要传入一个执行函数和函数的参数，创建一个Process实例，用start()方法启动，这样创建进程比fork()还要简单。

join()方法可以等待子进程结束后再继续往下运行，通常用于进程间的同步。












